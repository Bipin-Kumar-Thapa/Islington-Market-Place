{% extends 'master/base1.html' %}
{% load static %}
{% block content %}

<section class="section-content padding-y bg-light">
  <div class="container">
    <div class="card border-0 shadow-sm p-4">
      <div class="row align-items-start">
        
        <!-- Left: Image, Title, Price -->
        <div class="col-md-4" style="max-width: 300px;">
          <!-- Product Image -->
          <div class="mb-2">
            {% if product.product_image %}
              <img src="{{ product.product_image.url }}" class="img-fluid rounded border" alt="{{ product.name }}">
            {% else %}
              <img src="{% static 'images/default.png' %}" class="img-fluid rounded border" alt="No image available">
            {% endif %}
          </div>

          <!-- Product Title -->
          <h2 class="fw-bold mb-2">{{ product.name }}</h2>

          <!-- Price -->
          <div class="mb-3">
            {% if product.discount_price %}
              <!-- Display discount price with original price crossed out -->
              <span class="fs-5 fw-bold text-danger">Rs.{{ product.discount_price }}</span>
              <del class="text-muted text-decoration-line-through me-2">Rs.{{ product.price }}</del>
            {% else %}
              <!-- If no discount, show the regular price -->
              <strong>Price:</strong>
              <span class="fs-5 fw-bold text-danger">Rs.{{ product.price }}</span>
            {% endif %}
          </div>
        </div>

        <!-- Right: Description + Add to Cart -->
        <div class="col-md-8">
          <!-- Description -->
          <div class="mb-3">
            <h5 class="fw-bold mb-3">Description:</h5>
            <p class="text-muted mb-3">{{ product.description }}</p>
            {% if is_low_stock %}
              <p class="text-warning mb-0">Only {{ product.stock }} left in stock</p>
            {% endif %}
          </div>

          <div style="margin-left: 30px; margin-top: 8rem; display: flex; gap: 1.5rem;">
            {% if is_out_of_stock %}
              <!-- Out of Stock only -->
              <button class="btn btn-danger" style="width: 150px;" disabled>
                Out of Stock
              </button>
            {% else %}
              <!-- Buy Now shown only if product is in stock -->
              <a href="/checkout/" class="btn btn-warning" style="width: 150px;">
                Buy Now
              </a>

              <!-- Cart buttons -->
              {% if in_cart %}
                <a href="#" class="btn btn-danger" style="width: 150px;">
                  <span class="text">Added to Cart</span>
                </a>
                <a href="{% url 'cart' %}" class="btn btn-outline-primary" style="width: 150px;">
                  <span class="text">View Cart</span>
                </a>
              {% else %}
                <a href="{% url 'add_cart' product.id %}" class="btn btn-primary" style="width: 150px;">
                  <span class="text">Add to Cart</span>
                </a>
              {% endif %}
            {% endif %}
          </div>
      </div>
    </div>
  </div>
</section>

<!-- ============================ COMPONENT 1 END .// ================================= -->

<br />
<section class="customer-reviews">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <header class="section-heading">
          <h3>Customer Reviews</h3>
        </header>

        <article class="box mb-3">
          <div class="icontext w-100">
            <img
              src="/static/images/avatars/avatar1.jpg"
              class="img-xs icon rounded-circle"
            />
            <div class="text">
              <span class="date text-muted float-md-right">24.04.2020 </span>
              <h6 class="mb-1">Mike John</h6>
            </div>
          </div>

          <div class="mt-3">
            <p>
              Dummy comment Lorem ipsum dolor sit amet, consectetur adipisicing
              elit, sed do eiusmod tempor incididunt ut labore et dolore magna
              aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
              laboris nisi ut aliquip
            </p>
          </div>
        </article>
      </div>
    </div>
  </div>
</section>

<!-- container .//  -->

<!-- ========================= SECTION CONTENT END// ========================= -->
<style>
  .customer-reviews.container
  {
  max-width: 800px;
  margin: auto;
  }
</style>

{% endblock %}
